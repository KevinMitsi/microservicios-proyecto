[SERVICE]
    Flush        1
    Daemon       Off
    Log_Level    info
    HTTP_Server  On
    HTTP_Listen  0.0.0.0
    HTTP_Port    2020

# Input HTTP para recibir logs del procesador directo
[INPUT]
    Name              http
    Listen            0.0.0.0
    Port              9880
    Tag               logs.http

# Input alternativo: forward input para compatibilidad
[INPUT]
    Name              forward
    Listen            0.0.0.0
    Port              24224
    Tag               logs.forward

# Filtro para agregar metadatos de procesamiento
[FILTER]
    Name    modify
    Match   logs.*
    Add     processed_by fluent-bit

# Filtro para normalizar timestamps
[FILTER]
    Name    modify
    Match   logs.*
    Rename  timestamp @timestamp

# Output hacia OpenSearch
[OUTPUT]
    Name            opensearch
    Match           logs.*
    Host            opensearch
    Port            9200
    Index           logs-%Y.%m.%d
    Type            _doc
    Suppress_Type_Name On
    tls             Off
    tls.verify      Off
    Retry_Limit     3

# Output de debug (opcional - remover en producci√≥n)
[OUTPUT]
    Name   stdout
    Match  logs.*
